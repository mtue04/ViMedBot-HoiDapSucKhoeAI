:root{
  --bg:#f7f7fb;--border:#e5e7eb;--muted:#6b7280;--text:#111827;
  --brand:#1d4ed8;--brand-600:#1e40af;--white:#ffffff;
  --sidebar:#0f172a;--sidebar-800:#1f2937;--sidebar-700:#374151;
  --green-50:#ecfdf5;--green-100:#d1fae5;--blue-50:#eff6ff;--blue-100:#dbeafe;
  --shadow:0 10px 25px rgba(0,0,0,.08)
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}

/* Layout */
.app{display:flex;height:100vh}

/* Sidebar */
.sidebar{width:260px;background:var(--sidebar);color:#fff;display:flex;flex-direction:column;transition:width .25s;overflow:hidden}
.sidebar--collapsed{width:0}
.sidebar__top,.sidebar__bottom{padding:16px;border-bottom:1px solid var(--sidebar-700)}
.sidebar__bottom{border-top:1px solid var(--sidebar-700);border-bottom:none;margin-top:auto}
.sidebar__scroll{flex:1;overflow:auto}
.sidebar__section-title{font-size:11px;color:#9ca3af;padding:8px 16px;font-weight:600}
.sidebar__empty{color:#9ca3af;font-size:12px;padding:0 16px 12px}
.sidebar__list{padding:0 8px 12px}

/* Conversation item */
.conv{display:flex;align-items:center;gap:10px;padding:10px 10px;border-radius:10px;margin:4px 0;cursor:pointer;transition:background .15s}
.conv:hover{background:#111827}
.conv.active{background:#111827}
.conv__icon{flex-shrink:0;color:#d1d5db}
.conv__meta{flex:1;min-width:0}
.conv__title{font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.conv__title--editing{display:none}
.conv__edit{width:100%;font-size:13px;padding:6px 8px;border-radius:8px;border:1px solid #243041;background:#0b1220;color:#e5e7eb}
.conv__date{font-size:11px;color:#9ca3af;margin-top:2px}
.conv__actions{display:flex;gap:6px}
.icon-btn--xs{width:28px;height:28px;background:#162033}
.icon-btn--xs svg{width:16px;height:16px}
.icon-btn--xs:hover{filter:brightness(1.1)}

/* Buttons */
.btn{display:inline-flex;align-items:center;gap:8px;border:0;border-radius:10px;cursor:pointer;padding:10px 12px;font-weight:600;transition:filter .15s}
.btn--full{width:100%}
.btn--primary{background:#111827;color:#e5e7eb}
.btn--primary:hover{filter:brightness(1.1)}
.btn--ghost{background:transparent;color:#e5e7eb}
.btn--dark{background:#111827;color:#fff}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:10px;border:0;background:#f3f4f6;cursor:pointer}
.icon-btn:hover{filter:brightness(0.95)}
.icon-btn--send{background:var(--brand);color:#fff}
.icon-btn--send:hover{background:var(--brand-600)}

.badge-i{display:inline-flex;align-items:center;justify-content:center;border-radius:8px;background:rgba(59,130,246,.15);color:#93c5fd;font-weight:700}
.badge-i--lg{width:24px;height:24px;font-size:13px}
.info-text{font-size:15px;font-weight:600}

.main{flex:1;display:flex;flex-direction:column;min-width:0}
.main__header{display:flex;align-items:center;gap:10px;justify-content:flex-start;padding:12px 16px;border-bottom:1px solid var(--border);background:#fff}
.logo{height:32px}
.logo-text{display:none;font-weight:800;font-size:18px;color:#2563eb}

.chat{flex:1;overflow:auto;padding:16px;display:flex;flex-direction:column;gap:12px}
.msg{display:flex;gap:10px}
.msg--left{justify-content:flex-start}
.msg--right{justify-content:flex-end}
.msg__bubble{max-width:720px;padding:10px 12px;border-radius:16px;font-size:14px;line-height:1.5}
.msg--assistant .msg__bubble{background:#fff;border:1px solid var(--border)}
.msg--user .msg__bubble{background:#2563eb;color:#fff}
.avatar{width:32px;height:32px;border-radius:999px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:11px;font-weight:800;background:linear-gradient(135deg,#3b82f6,#22d3ee)}
.avatar--user{background:linear-gradient(135deg,#a855f7,#ec4899)}

.inputbar{border-top:1px solid var(--border);background:#fff;padding:12px}
.inputbar__inner{max-width:820px;margin:0 auto;display:flex;gap:8px;background:#f3f4f6;border-radius:14px;padding:8px}
.inputbar__inner input{flex:1;border:0;background:transparent;padding:8px 10px;font-size:14px;outline:none}
.disclaimer{margin:8px auto 0;max-width:820px;text-align:center;color:#6b7280;font-size:12px}

.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:50}
.modal.show{display:flex}
.modal__backdrop{position:absolute;inset:0;background:rgba(0,0,0,.4)}
.modal__content{position:relative;background:#fff;border:1px solid var(--border);border-radius:16px;width:min(640px,92vw);box-shadow:var(--shadow);overflow:hidden}
.modal__header,.modal__footer{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.modal__footer{border-top:1px solid var(--border);border-bottom:none;justify-content:flex-end}
.modal__body{padding:16px;display:flex;flex-direction:column;gap:12px}
.card{border:1px solid var(--border);border-radius:14px;padding:12px}
.card--blue{background:var(--blue-50);border-color:var(--blue-100)}
.card--green{background:var(--green-50);border-color:var(--green-100)}
.card__title{font-weight:700;margin-bottom:6px}
.card__list{margin:0;padding-left:18px}
.card__list li{margin:6px 0}

@media (max-width: 900px){
  .sidebar{position:fixed;height:100vh;z-index:40;left:0;top:0}
  .sidebar--collapsed{transform:translateX(-100%);width:260px}
  .main__header{justify-content:space-between}
}

/* Typing Indicator */
.typing-indicator { display:flex; gap:4px; padding:8px 0; }
.typing-indicator span { width: 8px; height: 8px; border-radius: 50%; background: var(--brand); opacity: 0.6; animation: typing 1.4s infinite; }
.typing-indicator span:nth-child(2){ animation-delay:.2s; }
.typing-indicator span:nth-child(3){ animation-delay:.4s; }
@keyframes typing { 0%,60%,100%{transform:translateY(0);opacity:.6} 30%{transform:translateY(-10px);opacity:1} }

/* Disable input when processing */
input:disabled, button:disabled { opacity:.6; cursor:not-allowed; }

/* Smooth scrolling */
#messages { scroll-behavior:smooth; }

/* ---- Answer formatting ---- */
.ai-answer p { margin:8px 0; }
.ai-answer ul, .ai-answer ol { margin:8px 0 8px 18px; padding-left:18px; }
.ai-answer li { margin:6px 0; }
.ai-answer strong { font-weight:700; }
.ai-answer em { font-style:italic; }
.ai-answer a { text-decoration:underline; word-break:break-word; }

/* Code styles */
.codeblock {
  background:#0b1220;
  color:#e5e7eb;
  border-radius:10px;
  padding:10px 12px;
  overflow:auto;
  border:1px solid var(--border);
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 13px;
  line-height: 1.45;
}
.code-inline {
  background:#f3f4f6;
  padding:2px 6px;
  border-radius:6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  font-size: 13px;
}